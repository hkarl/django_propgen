[{"model": "proposal.template", "pk": 3, "fields": {"name": "partner-table.tex", "description": "Produce a table with all partners, suitable for titlepage", "template": "\\noindent\r\n{\r\n\\begin{tabular}{cp{8cm}ll}\r\n\\toprule\r\nParticipant no. & Participant organisation & Short name & Country \\\\\r\n\\midrule\r\n///% for p in Partner -%///\r\n/// loop.index ///   &  /// p.partnername /// & /// p.shortname ///  &  ///  p.country ///  \\\\\r\n///% endfor %///\r\n\\bottomrule\r\n\\end{tabular}\r\n}", "startpoint": false}}, {"model": "proposal.template", "pk": 4, "fields": {"name": "titlepage.tex", "description": "Template to produce the titlepage of the proposal PDF", "template": "% Titlepage repls\r\n\r\n\\begin{center}\r\n{\\LARGE  STREP  } \\\\[.2cm]\r\n{\\large  /// Project.callid ///   } \\\\[.4cm]\r\n{\\LARGE \\textbf{  /// Project.title ///  } } \\\\[.3cm]\r\n{\\LARGE Acronym: \\textbf{  /// Project.shortname ///  } } \\\\[.3cm] \r\n\\end{center}\r\n{\\large Date of Preparation: \\today, \\currenttime }\\\\[1em]\r\n\\begin{large}\r\n\\begin{description}\r\n\\item[Work program topics  addressed:]  /// Project.callobjectives ///\r\n\\item[Coordinator:] /// Project.coordinatorName  ///\r\n\\item[e-mail:] {\\url{ /// Project.coordinatorEmail /// } }\r\n\\item[tel/fax:]   /// Project.coordinatorPhone ///\r\n\\end{description}\r\n\\end{large}\r\n\r\n\\input{partner-table}", "startpoint": false}}, {"model": "proposal.template", "pk": 5, "fields": {"name": "main.tex", "description": "This is the starting file for standard proposal generation. Only edit this when you've carefully read the manual and REALLY know what you are doing!", "template": "\\documentclass[a4paper,11pt,twoside]{scrreprt}\r\n\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n% packages were the user might want to configure a few things: \r\n\r\n\\usepackage{longtable}\r\n\r\n% should there be space for page headings in the page layout? \r\n\\usepackage{fullpage}\r\n% \\usepackage[headings]{fullpage}\r\n\r\n%% KOMA Options (for details and further options, look into the KOMA \r\n%% documentation) \r\n% should there be horizontal lines in header and footer? \r\n% \\KOMAoptions{headsepline=true,footsepline=true}\r\n\r\n% should there be standard headings? \r\n%\\KOMAoptions{headings=normal}\r\n\r\n\r\n% how should fixme's be displayed? \r\n\\usepackage[inline,nomargin,draft]{fixme}\r\n\r\n% to display the commission hints: \r\n\\newcommand{\\commissionhints}[1]{ \\begin{minipage}{0.9\\textwidth} \\color{Coral} \\small #1 \\end{minipage}}\r\n\r\n\r\n\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n% packages that are needed or highly advisable, \r\n% but which should not needed any configuration \r\n\r\n\\usepackage[utf8]{inputenc}\r\n\\usepackage[numbers]{natbib}\r\n\\usepackage{checkend}\r\n\\usepackage{varioref}\r\n\\usepackage{subfigure}\r\n\\usepackage{hyperref}\r\n\\usepackage{booktabs}\r\n\\usepackage{xtab}\r\n\\usepackage{tabularx}\r\n\\usepackage{adjustbox}\r\n\\usepackage{capt-of}\r\n\\usepackage{acronym}\r\n\r\n\\usepackage{pdflscape}\r\n\\newlength\\landscapewidth\r\n\\newlength\\landscapeheight\r\n\r\n\\usepackage{multicol}\r\n\r\n\\usepackage[svgnames,table]{xcolor}\r\n\\usepackage[alwaysadjust]{paralist}\r\n\\usepackage{url}\r\n\\usepackage{calc}\r\n\\usepackage{ifthen}\r\n\\newcommand{\\ifTrue}[3]{\\ifthenelse{\\equal{True}{#1}}{#2}{#3}}\r\n\r\n\\usepackage{tikz}\r\n\\usepackage{styles/pgf-pie}\r\n\r\n\\usepackage{framed}\r\n\\usepackage{comment}\r\n\r\n\\usepackage{mathptmx}\r\n\\usepackage[scaled=.90]{helvet}\r\n\\usepackage{courier}\r\n\r\n\r\n\\usepackage{textcomp}           %for euro symbol\r\n\r\n\\usepackage{graphicx}\r\n\\graphicspath{ {../}{Figures/}{figures/}}\r\n\r\n%%% make sure to use the pgfgantt file from the SVN! \r\n\\usepackage{styles/pgfgantt}\r\n\r\n%%% Needed to redefine bibliography environment to get rid of the\r\n%%% chapter heading \r\n\\usepackage{styles/bibhack}\r\n\r\n\r\n\r\n\r\n\r\n%%%% to get references to the deliverables \r\n\\makeatletter\r\n\\newcommand{\\labitem}[2]{%\r\n\\def\\@itemlabel{\\textbf{#1}:}\r\n\\item\r\n\\def\\@currentlabel{#1}\\label{#2}}\r\n\\makeatother\r\n\r\n\r\n\r\n% compact bibliography: \r\n\\let\\oldbibliography\\thebibliography\r\n\\renewcommand{\\thebibliography}[1]{%\r\n  \\oldbibliography{#1}%\r\n  \\setlength{\\itemsep}{0pt}%\r\n}\r\n\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n%%%% import all the settings that result from switches in settings.cfg \r\n% \\input{settings}\r\n\r\n% how deeply should headings be numbered? \r\n\\setcounter{secnumdepth}{///Setting.LaTeX.secNumDepth///}\r\n\r\n% to what level should the table of content display sections? \r\n\\setcounter{tocdepth}{///Setting.LaTeX.tocLevel///}\r\n\r\n%%%%%\r\n% compact lists options \r\n% TODO: check whether this works before loading the package? \r\n\\setlength{\\pltopsep}{0.5ex}\r\n\\setlength{\\plitemsep}{0.25ex}\r\n\r\n\\usepackage{datetime}\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n% a counter to reference to WP tables \r\n%%%% to get references to WPs and tasks \r\n\r\n\r\n\\newcounter{WpCounter}\r\n\\newcommand{\\WpCounter}[1] {%\r\n  \\refstepcounter{WpCounter}\r\n  \\label{#1}\r\n}\r\n\r\n\\renewcommand{\\theWpCounter}{WP\\,\\arabic{WpCounter}}\r\n\r\n\r\n\\newcounter{TaskCounter}[WpCounter]\r\n\\newcommand{\\TaskCounter}[1]{%\r\n  \\refstepcounter{TaskCounter}\r\n  \\label{#1}\r\n}\r\n\r\n\\renewcommand{\\theTaskCounter}{T\\,\\arabic{WpCounter}.\\arabic{TaskCounter}}\r\n\r\n\\newcounter{DelCounter}[WpCounter]\r\n\\newcommand{\\DelCounter}[1]{%\r\n  \\refstepcounter{DelCounter}\r\n  \\label{#1}\r\n}\r\n\r\n\\renewcommand{\\theDelCounter}{D\\,\\arabic{WpCounter}.\\arabic{DelCounter}}\r\n\r\n\r\n\\newcounter{MsCounter}[WpCounter]\r\n\\newcommand{\\MsCounter}[1]{%\r\n  \\refstepcounter{MsCounter}\r\n  \\label{#1}\r\n}\r\n\r\n\\renewcommand{\\theMsCounter}{MS\\,\\arabic{WpCounter}.\\arabic{MsCounter}}\r\n\r\n\r\n\r\n%%%%\r\n% from https://github.com/jgm/pandoc-templates/blob/master/default.latex: \r\n\\providecommand{\\tightlist}{%\r\n  \\setlength{\\itemsep}{0pt}\\setlength{\\parskip}{0pt}}\r\n\r\n%%%% \r\n\\ifTrue{///Setting.LaTeX.showCommissionHints///}{}{\r\n\\renewcommand{\\commissionhints}[1]{}\r\n}\r\n\r\n\\ifTrue{///Setting.LaTeX.useShowkeys///}{\r\n\\usepackage{showkeys}}{}\r\n\r\n\r\n%-----------------\r\n% load further packages \r\n///Setting.CustomLaTeX.packages///\r\n\r\n\\begin{document}\r\n\r\n\\setlength\\landscapewidth{\\textheight}\r\n\\setlength\\landscapeheight{\\textwidth+2\\headsep}\r\n\r\n\r\n\r\n\\pagenumbering{roman}\r\n\\thispagestyle{empty}\r\n\\input{titlepage}\r\n\r\n\r\n\\newpage\r\n\\noindent \\textbf{Proposal Abstract}\r\n\\addcontentsline{toc}{chapter}{\\protect\\numberline{}Abstract}\r\n\\par\\medskip\\noindent\r\n\\input{ProposalAbstract}\r\n\r\n\r\n{\\small\\tableofcontents\r\n\\ifTrue{///Setting.LaTeX.showListOfTables///}{\r\n  \\listoftables\r\n  \\addcontentsline{toc}{chapter}{\\protect\\numberline{}List of Tables}\r\n}{}\r\n\\ifTrue{///Setting.LaTeX.showListOfFigures///}{\r\n  \\listoffigures\r\n  \\addcontentsline{toc}{chapter}{\\protect\\numberline{}List of Figures}\r\n}{}\r\n\\ifTrue{///Setting.LaTeX.showAcronymList///}{\r\n  \\chapter*{List of Acronyms}\r\n  \\addcontentsline{toc}{chapter}{\\protect\\numberline{}List of Acronyms}\r\n  \\input{AcronymsList}\r\n}{}\r\n}\r\n\r\n\r\n\\ifTrue{///Setting.LaTeX.showWarnings///}{\r\n\\newpage\r\n\\listoffixmes\r\n\\IfFileExists{warnings.tex}{\r\n  \\begin{compactitem}\r\n    \\input{warnings}\r\n  \\end{compactitem}}{No warnings found!}\r\n}{\\renewcommand{\\fxnote}[1]{}\r\n\\renewcommand{\\fxwarning}[1]{}\r\n\\renewcommand{\\fxerror}[1]{}\r\n\\renewcommand{\\fxfatal}[1]{}\r\n}\r\n\r\n\r\n\\cleardoublepage\r\n\\setcounter{part}{2}% part B\r\n\r\n\r\n\\pagenumbering{arabic}\r\n\\commissionhints{MAximum length for the whole of Section 1 \r\n--  twenty pages, not including the tables in Section 1.3}\r\n\r\n\\input{includer}\r\n\r\n\r\n\\appendix \r\n\\chapter{References}\r\n\r\n\\begin{footnotesize}\r\n  \\bibliographystyle{plainnat}\r\n  ///% for bib in Bibliography %///\r\n  \\bibliography{///bib|replace('.bib', '')///}\r\n  ///% endfor %///\r\n\\end{footnotesize}\r\n\r\n\\end{document}", "startpoint": true}}, {"model": "proposal.template", "pk": 6, "fields": {"name": "includer.tex", "description": "A template to pull together the individual text blocks. Here, order of the various sections is controlled.", "template": "% add input commands here\r\n\r\n\\input{ExcellenceAndObjectives}\r\n\\input{RelationWorkProgramme}\r\n\\input{ConceptAndApproach}\r\n\\input{AmbitionDescription}\r\n\\input{ExpectedImpacts}\r\n\\input{MeasuresMaximizeImpact}\r\n\r\n% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n\r\n\\input{implementation}\r\n\r\n% % \\input{figures/tables/wpsummarytable}\r\n\r\n% \\clearpage \r\n\r\n% %%% a little demo to include all gantt charts, likely not useful! \r\n% \\input{figures/gantts/demoGantts}\r\n\r\n% % long Gantt charts might be best put on two pages, left the chart,\r\n% % right the legend: \r\n% \\input{figures/gantts/CompleteGanttFacingLegend}\r\n\r\n% % smaller Gantt chart and legend might be nicely put in\r\n% % standard floating environments\r\n\\input{CompleteGantt}\r\n% % \\input{figures/gantts/allLegend}\r\n\r\n% \\clearpage\r\n% % \\input{figures/gantts/CompleteGanttNoDelMS}\r\n\r\n% \\clearpage \r\n\r\n% % %%%\r\n\r\n\\input{DeliverablesTable}\r\n\\input{MilestonesTable}\r\n\r\n\\input{WpSummaryTable}\r\n\\input{EffortSummary}\r\n\\input{EffortDetails}\r\n\r\n\\clearpage\r\n\\input{WpList}\r\n\r\n\r\n\r\n% \\clearpage \r\n\r\n\r\n% % \\input{figures/tables/summaryEffort}\r\n% % \\input{figures/tables/effortPerTaskTable}\r\n\r\n\r\n\\input{ManagementStructureAndProcedures}\r\n\r\n\\input{consortium}\r\n\r\n\\input{resources}\r\n\r\n\\input{BudgetSummary}\r\n\\input{BudgetExplanations}\r\n\\input{PieCharts}\r\n\r\n\\input{RisksForImplementation}\r\n\r\n\\input{members}\r\n\r\n\\input{memberlist}\r\n% %%%%%%%%\r\n\r\n% \\newcommand{\\goodgap}{%\r\n% \\hspace{\\subfigtopskip}%\r\n% \\hspace{\\subfigbottomskip}}\r\n\r\n% % \\input{figures/pies/piePMsWPs}\r\n% % \\input{figures/pies/piePMsPartners}\r\n% % \\input{figures/pies/pieBudgetPartners}\r\n% % \\input{figures/pies/pieRequestedBudgetPartners}\r\n% % \\input{figures/pies/piePartnersCompact}\r\n\r\n\r\n% % \\input{figures/pies/piePMsNations}\r\n% % \\input{figures/pies/pieTotalCostNations}\r\n% % \\input{figures/pies/pieRequestedNations} \r\n% % \\input{figures/pies/pieNationsCompact} \r\n\r\n% % \\input{figures/pies/piePMsPartnerTypes}\r\n% % \\input{figures/pies/pieTotalCostPartnerType}\r\n% % \\input{figures/pies/pieRequestedPartnerType}\r\n% % \\input{figures/pies/piePartnerTypeCompact}\r\n\r\n\\input{third_parties}\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%\r\n\r\n\r\n\\input{ethics_security}", "startpoint": false}}, {"model": "proposal.template", "pk": 7, "fields": {"name": "memberlist.tex", "description": "Generate the list of all partner descriptions", "template": "% Partner list goes here\r\n\r\n///% for p in Partner %///\r\n\r\n\\subsection{///p.partnername/// (///p.shortname///)}\r\n\\label{Partner:///p.shortname///}\r\n\r\n/// p.description ///\r\n\r\n///% if p.organization %///\r\n\\subsubsection{Organization}\r\n\\label{Partner:///p.shortname///:organization}\r\n\r\n/// p.organization ///\r\n///% endif %///\r\n\r\n///% if p.individuals %///\r\n\\subsubsection{Individual researchers}\r\n\\label{Partner:///p.shortname///:individual}\r\n\r\n/// p.individuals ///\r\n///% endif %///\r\n\r\n///% if p.partnerpublications %///\r\n\\subsubsection{Relevant publications, products, services}\r\n\\label{Partner:///p.shortname///:publications}\r\n\r\n/// p.partnerpublications ///\r\n///% endif %///\r\n\r\n///% if p.partnerprojects %///\r\n\\subsubsection{Relevant previous projects or activities}\r\n\\label{Partner:///p.shortname///:projects}\r\n\r\n/// p.partnerprojects ///\r\n///% endif %///\r\n\r\n///% if p.infrastructure %///\r\n\\subsubsection{Significant infrastructure}\r\n\\label{Partner:///p.shortname///:infrastructure}\r\n/// p.infrastructure ///\r\n///% endif %///\r\n\r\n\r\n///% endfor %///", "startpoint": false}}, {"model": "proposal.template", "pk": 8, "fields": {"name": "WpSummaryTable.tex", "description": "WP Summary table", "template": "% summary of all Work Packages \r\n\r\n\\begin{table}[bhtp]\r\n\\caption{Summary table of all work packages}\r\n\\label{tab:wpsummary}\r\n\\begin{tabular}{cp{0.25\\textwidth}cccrcc}\r\n\\toprule\r\n    WP No. & WP name & Type of & Lead & Lead & Person- & Start & End \\\\\r\n        & & activity & part. no. & short name & months & month & month \\\\\r\n\\midrule\r\n///% for wp in Workpackage %///\r\n\\ref{/// wp.tag ///} & \r\n///wp.title/// & \r\n///wp.type/// & \r\n/// wp.lead.order /// & \r\n///wp.lead.shortname /// & \r\n/// allEfforts|fieldfilter('wp', wp)|sum(attribute='effort')  ///    & \r\n///wp.startmonth /// & \r\n///wp.endmonth /// \\\\ \r\n///% endfor %///\r\n\\midrule\r\n\\multicolumn{2}{l}{Total:} & & & & ///allEfforts|sum(attribute='effort')/// & & \\\\\r\n\\bottomrule\r\n\\end{tabular}\r\n\\end{table}", "startpoint": false}}, {"model": "proposal.template", "pk": 9, "fields": {"name": "DeliverablesTable.tex", "description": "Produce a table summarizing all deliverables", "template": "\\ifTrue{///Setting.LaTeX.useMultipageDeliverableTable///}\r\n{% long version \r\n\\topcaption{Summary of all deliverables (Nature: O=Other, P=Prototype, R=Report; Dissemination: PU=Public, RE=Restricted, CO=Confidential)}\r\n \\label{tab:deliverablesummary}\r\n \\tablefirsthead{        \\toprule \r\n   Number  & Title & Due date & Nature & Diss. & Contributing task(s)\\\\\r\n        \\midrule\r\n }\r\n \\tablehead{\\toprule \r\n \t    \\multicolumn{6}{r}{\\emph{Table~\\ref{tab:deliverablesummary} continues from previous page}} \\\\\r\n\t    \\toprule \r\n   Number  & Title & Due date & Nature & Diss. & Contributing task(s)\\\\\r\n            \\midrule\r\n }\r\n \\tabletail{\\bottomrule \\multicolumn{6}{r}{\\emph{Table~\\ref{tab:deliverablesummary} continues on next page}} \\\\ \\bottomrule}\r\n \\tablelasttail{\\multicolumn{6}{r}{Table~\\ref{tab:deliverablesummary} ends} \\\\ \\bottomrule}\r\n\t\\begin{center}\r\n        \\begin{mpxtabular}{l|p{0.35\\textwidth}|c|c|c|p{0.15\\textwidth}}\r\n\t///% for d in Deliverable %///\r\n\t     \\ref{///d.tag///} & ///d.title/// & ///d.due /// & ///d.type.short /// & ///d.dissemination.short/// & \r\n/// d.tasklist///\r\n        \\\\\r\n        ///% endfor %///\r\n        \\bottomrule\r\n        \\end{mpxtabular}\r\n\t\\end{center}\r\n}\r\n{% short, single-page version of deliverable table \r\n \\begin{table}[hbtp]\r\n   \\caption{Summary of all deliverables (Nature: O=Other, P=Prototype, R=Report; Dissemination: PU=Public, RE=Restricted, CO=Confidential)}\r\n   \\label{tab:deliverablesummary}\r\n   \\begin{center}\r\n   \\begin{tabular}{l|p{0.35\\textwidth}|c|c|c|p{0.15\\textwidth}}\r\n   \\toprule\r\n   Number  & Title & Due date & Nature & Diss. & Contributing task(s)\\\\\r\n   \\midrule\r\n   % rows are the same in both versions of the table \r\n\t///% for d in Deliverable %///\r\n\t     \\ref{///d.tag///} & ///d.title/// & ///d.due /// & ///d.type.short /// & ///d.dissemination.short/// & \r\n/// d.tasklist///\r\n        \\\\\r\n        ///% endfor %///\r\n   \\bottomrule\r\n   \\end{tabular}\r\n   \\end{center}\r\n   \\end{table}\r\n}", "startpoint": false}}, {"model": "proposal.template", "pk": 10, "fields": {"name": "MilestonesTable.tex", "description": "Produce a table summarizing all existing milestones", "template": "\\ifTrue{///Setting.LaTeX.useMultipageMilestoneTable///}\r\n{% long version \r\n\\topcaption{Summary of all milestones}\r\n \\label{tab:milestonessummary}\r\n \\tablefirsthead{        \\toprule \r\n        Number  & Title & Due date   &  Means of verification & Contributing task(s) \\\\\r\n        \\midrule\r\n }\r\n \\tablehead{\\toprule \r\n \t    \\multicolumn{5}{r}{\\emph{Table~\\ref{tab:milestonessummary} continues from previous page}} \\\\\r\n\t    \\toprule \r\n            Number  & Title & Due date   &  Means of verification & Contributing task(s) \\\\\r\n            \\midrule\r\n }\r\n \\tabletail{\\bottomrule \\multicolumn{5}{r}{\\emph{Table~\\ref{tab:milestonessummary} continues on next page}} \\\\ \\bottomrule}\r\n \\tablelasttail{\\multicolumn{5}{r}{Table~\\ref{tab:milestonessummary} ends} \\\\ \\bottomrule}\r\n\t\\begin{center}\r\n        \\begin{mpxtabular}{l|p{0.3\\textwidth}|c|p{0.3\\textwidth}|p{0.1\\textwidth}}\r\n%\r\n///% for d in Milestone %///\r\n         \\ref{///d.tag///} & ///d.title/// & ///d.due /// & ///d.verification ///  & \r\n/// d.tasklist ///\r\n        \\\\\r\n        ///% endfor %///\t\r\n%\r\n        \\bottomrule\r\n        \\end{mpxtabular}\r\n\t\\end{center}\r\n}\r\n{% short, single-page version of deliverable table \r\n  \\begin{table}[hbtp]\r\n        \\caption{Summary of all milestones}\r\n        \\label{tab:milestonessummary}\r\n\t\\begin{center}\r\n        \\begin{tabular}{l|p{0.3\\textwidth}|c|p{0.3\\textwidth}|p{0.1\\textwidth}}\r\n        \\toprule \r\n        Number  & Title & Due date   &  Means of verification & Contributing task(s) \\\\\r\n        \\midrule\r\n%\r\n///% for d in Milestone %///\r\n         \\ref{///d.tag///} & ///d.title/// & ///d.due /// & ///d.verification ///  & \r\n/// d.tasklist ///\r\n        \\\\\r\n        ///% endfor %///\t\r\n%\r\n        \\bottomrule\r\n        \\end{tabular}\r\n\t\\end{center}\r\n        \\end{table}\r\n}", "startpoint": false}}, {"model": "proposal.template", "pk": 11, "fields": {"name": "EffortSummary.tex", "description": "Produce a table showing Person month effort over partners and workpackages. Controlled by setting Setting.Summaries.showEffortPartnerWPs", "template": "\\ifTrue{///Setting.Summaries.showEffortPartnerWPs///}{\\begin{table}\r\n \\caption{Summary of all effort over all partners and workpackages}\r\n \\label{tab:summaryEffortperWP}\r\n \\begin{center}\r\n \\begin{tabular}{l///'c'*Workpackage|length///r}\r\n \\toprule\r\n Partner \r\n ///% for wp in Workpackage %///\r\n  &   \\ref{///wp.tag///}\r\n ///% endfor %///\r\n& Total\r\n \\\\\r\n \\midrule\r\n///% for p in Partner %///\r\n  /// p.shortname ///\r\n  ///% for wp in Workpackage %///\r\n     &\r\n     /// allEfforts|fieldfilter('partner', p)|fieldfilter('wp', wp)|map(attribute='effort')|sum ///\r\n  ///% endfor %///\r\n  & /// allEfforts|fieldfilter('partner', p)|map(attribute='effort')|sum ///\r\n \\\\\r\n///% endfor %///\r\n \\midrule\r\n Total\r\n  ///% for wp in Workpackage%///\r\n     &\r\n     /// allEfforts|fieldfilter('wp', wp)|map(attribute='effort')|sum ///\r\n  ///% endfor %///\r\n  & /// allEfforts|map(attribute='effort')|sum ///\r\n \\\\\r\n \\bottomrule\r\n \\end{tabular}\r\n \\end{center}\r\n \\end{table}\r\n }{}", "startpoint": false}}, {"model": "proposal.template", "pk": 12, "fields": {"name": "WpList.tex", "description": "Produce the tables of workpackages.", "template": "///%- macro centerer(s) -%///\r\n\\hfill {///s///} \\hfill \\vadjust{}\r\n///%- endmacro -%///\r\n\r\n\\section{Work package tables}\r\n\\label{sec:wptables}\r\n\r\n///% for wp in Workpackage %///\r\n\\subsection{WP ///wp.order///: ///wp.title///}\r\n\\WpCounter{///wp.tag///}\r\n% \\label{///wp.tag///}\r\n%\\labitem{WP,\\///wp.order///}{///wp.tag///}\r\n\r\n% table header: \r\n\\begin{tabular}{\r\n|p{0.///Setting.WPTables.firstColumnWidth///\\textwidth} \r\n/// ( '|p{'+ \r\n( Setting.WPTables.tabularCorrection|float * (100.0 - Setting.WPTables.firstColumnWidth|int) / Setting.WPTables.maxPartnersPerRow|int  / 100.0 )|string  + \r\n'\\\\textwidth}' + Setting.WPTables.wptablespacing )   * Setting.WPTables.maxPartnersPerRow|int /// \r\n| } \r\n\\hline \r\n% fill in the header: \r\n% which WP? \r\n\\textbf{Work package no.} & \r\n\\multicolumn{1}{c|}{\\ref{///wp.tag///}} & \r\n\\multicolumn{///Setting.WPTables.maxPartnersPerRow|int - 1 ///}{l|}{\\textbf{Start date:} M\\, ///wp.startmonth ///}\r\n\\\\ \r\n\\hline \r\n% WP Title row \r\n\\textbf{Work package title} & \r\n\\multicolumn{///Setting.WPTables.maxPartnersPerRow///}{l|}{///wp.title///}\r\n\\\\\r\n\\hline\r\n% Activity type line \r\n\\textbf{Activity type} & \\multicolumn{///Setting.WPTables.maxPartnersPerRow///}{l|}{///wp.type/// \\hfill}\r\n\\\\\r\n\\hline\r\n%%%%%%%%%%%%%%%%%%\r\n% Partner lists\r\n///% for line in range(0, (Partner|count // Setting.WPTables.maxPartnersPerRow|int) + 1) %///\r\n%% groups of three lines: participant number, short name of participant, personb months \r\nPart.\\ no.\\  \r\n///% for n in range(line * Setting.WPTables.maxPartnersPerRow|int +1, (line+1) * Setting.WPTables.maxPartnersPerRow|int+1) %///\r\n&\r\n///% if n <= Partner|length  %///\r\n/// centerer(n) ///  \r\n///% endif %///\r\n///% endfor %///\r\n\\\\ \\hline\r\nShort name \r\n///% for n in range(line * Setting.WPTables.maxPartnersPerRow|int +1, (line+1) * Setting.WPTables.maxPartnersPerRow|int+1) %///\r\n&\r\n///% if n <= Partner|length  %///\r\n/// centerer(Partner[n-1].shortname) ///  \r\n///% endif %///\r\n///% endfor %///\r\n\\\\ \\hline \r\n% and the budget line \r\nPerson months  \r\n///% for n in range(line * Setting.WPTables.maxPartnersPerRow|int +1, (line+1) * Setting.WPTables.maxPartnersPerRow|int+1) %///\r\n&\r\n///% if n <= Partner|length  %///\r\n/// centerer(allEfforts|fieldfilter('wp', wp)|fieldfilter('partner', Partner[n-1])|sum(attribute='effort')) ///  \r\n///% endif %///\r\n///% endfor %///\r\n\\\\ \\hline \r\n///% endfor %///  % partner list \r\n\\end{tabular}\r\n%%------------------------------\r\n%  This completes the table header\r\n\r\n\\begin{framed}\r\n\\subsection*{Objectives}\r\n\r\n/// wp.objectives|pandoc(starred=True) ///\r\n\\end{framed}\r\n\r\n\r\n\\begin{framed}\r\n\\subsection*{Description of work package \\ref{///wp.tag///}}\r\n\\ifTrue{///Setting.WPTables.wpdescriptionShowsLeader///}{(workpackage leader: ///wp.lead.shortname///}{}\r\n\r\n///wp.description|pandoc(starred=True) ///\r\n\\end{framed}\r\n\r\n\\begin{framed}\r\n\\noindent \\textbf{Tasks of work package \\ref{///wp.tag///}}\r\n\r\n%% build a list of the tasks and their adminstrative data; task descriptions follow below \r\n\\begin{compactdesc}\r\n///% for task in wp.task_set.all() %///\r\n\\item \\ref{///task.tag///} ///task.title///\r\n% show task duration interval(s)\r\n\\ifTrue{///Setting.WPTables.tasklistShowsDuration///}{\r\n \\hfill (/// task.interval()|formatListofTuples('M\\,{0} -- M\\,{1}')|join(', ')///)\r\n }{}\r\n%\r\n\\ifTrue{///Setting.WPTables.tasklistShowsPartners///}{\r\n~\\\\ Contributing partners:\r\n/// task.contributors()|sort|listBoldfacer(task.lead.shortname)|join(', ')///\r\n}{}\r\n%\r\n\\ifTrue{///Setting.WPTables.tasklistShowsDeliverables///}{\r\n~\\\\ Contributing to Deliverables:~\r\n///% set comma = joiner(\", \") %///\r\n///% for d in task.deliverable_set.all() %///\r\n///- comma() -/// \\textbf{\\ref{/// d.tag ///}}\r\n///% endfor %///\r\n///% for d in task.deliverable_secondaryTasks.all() %///\r\n///- comma() -/// \\ref{/// d.tag ///}\r\n///% endfor %///\r\n }{}\r\n%\r\n%\r\n\\ifTrue{///Setting.WPTables.tasklistShowsMilestones///}{\r\n~\\\\ Contributing to Milestones:~\r\n///% set comma = joiner(\", \") %///\r\n///% for d in task.milestone_set.all() %///\r\n///- comma() -/// \\textbf{\\ref{/// d.tag ///}}\r\n///% endfor %///\r\n///% for d in task.milestone_secondaryTasks.all() %///\r\n///- comma() -/// \\ref{/// d.tag ///}\r\n///% endfor %///\r\n }{}\r\n%\r\n///% endfor %///  % tasks\r\n\\end{compactdesc}\r\n{\\footnotesize \\emph{Lead partners are shown in bold.}}\r\n\\end{framed}\r\n\r\n%%%%%%%%%%%%%%%%%%\r\n% The descriptions of the individual tasks\r\n///% for task in wp.task_set.all() %///\r\n\\begin{framed}\r\n\\noindent \\textbf{Description of Task \\ref{///task.tag///}: ///task.title///}\r\n\\TaskCounter{///task.tag///}\r\n\\ifTrue{///Setting.WPTables.taskboxShowsLeader///}{(Task leader: ///task.lead.shortname///)}{}\r\n\\ifTrue{///Setting.WPTables.taskboxShowTaskTotalEffort///}{\\\\Total task\r\n  effort (including hosted deliverables/milestones): \r\n///allEfforts|fieldfilter('task',task)|sum(attribute='effort')///\\,PM}{}\r\n\\ifTrue{///Setting.WPTables.taskboxShowTaskSpecificEffort///}{\\\\Task\r\n  effort  (not including hosted deliverables/milestones): \r\n/// task.taskpartnerpm_set.all()|sum(attribute='effort') ///\\,PM}{}\r\n\\ifTrue{///Setting.WPTables.taskboxShowsObjectives ///}{ ~\\\\[0.2cm]\r\n \\noindent \\textbf{Task objectives:} ///task.objectives|pandoc(starred=True)///}{}\r\n \\ifTrue{///Setting.WPTables.taskboxShowsDescription///}{~ \\\\[0.2cm]\r\n \\noindent \\textbf{Description of task work:} ///task.description|pandoc(starred=True)///}{}\r\n\r\n \\ifTrue{///Setting.WPTables.taskboxShowsDeliverables///}{\r\n///% if task.deliverable_set.all() %///\r\n~\\\\[0.3cm]\r\n \\noindent {\\centering\r\n \\begin{tabular}{lp{0.7\\textwidth}l}\r\n \\multicolumn{3}{l}{\\textbf{Deliverables produced by Task \\ref{///task.tag///}:} } \\\\\r\n \\toprule\r\n Del.\\ no. & Deliverable name & Due \\\\\r\n \\midrule\r\n///% for d in task.deliverable_set.all() %///\r\n\\ref{///d.tag///} &  /// d.title /// & /// d.due ///\r\n\\\\\r\n///% endfor %///\r\n \\bottomrule\r\n \\end{tabular} }\r\n///% endif %///\r\n///% if task.deliverable_secondaryTasks.all() %///\r\n~\\\\[0.3cm]\r\n \\noindent {\\centering\r\n \\begin{tabular}{lp{0.7\\textwidth}l}\r\n \\multicolumn{3}{l}{\\textbf{Deliverables contributed to by Task \\ref{///task.tag///}:} } \\\\\r\n \\toprule\r\n Del.\\ no. & Deliverable name & Due \\\\\r\n \\midrule\r\n///% for d in task.deliverable_secondaryTasks.all() %///\r\n\\ref{///d.tag///} &  /// d.title /// & /// d.due ///\r\n\\\\\r\n///% endfor %///\r\n \\bottomrule\r\n \\end{tabular} }\r\n///% endif %///\r\n }{}\r\n\\ifTrue{///Setting.WPTables.taskboxShowsMilestones///}{\r\n///% if task.milestone_set.all() %///\r\n~\\\\[0.3cm]\r\n \\noindent {\\centering\r\n \\begin{tabular}{lp{0.7\\textwidth}l}\r\n \\multicolumn{3}{l}{\\textbf{Milestones produced  by Task \\ref{///task.tag///}:} } \\\\\r\n \\toprule\r\n MS.\\ no. & Milestone name & Due \\\\\r\n \\midrule\r\n///% for m in task.milestone_set.all() %///\r\n\\ref{/// m.tag ///} & ///m.title/// & ///m.due /// \\\\\r\n///% endfor %///\r\n \\bottomrule\r\n \\end{tabular} }\r\n///% endif %///\r\n///% if task.milestone_secondaryTasks.all() %///\r\n~\\\\[0.3cm]\r\n \\noindent {\\centering\r\n \\begin{tabular}{lp{0.7\\textwidth}l}\r\n \\multicolumn{3}{l}{\\textbf{Milestones contributed to  by Task \\ref{///task.tag///}:} } \\\\\r\n \\toprule\r\n MS.\\ no. & Milestone name & Due \\\\\r\n \\midrule\r\n///% for m in task. milestone_secondaryTasks.all()  %///\r\n\\ref{/// m.tag ///} & ///m.title/// & ///m.due /// \\\\\r\n///% endfor %///\r\n \\bottomrule\r\n \\end{tabular} }\r\n///% endif %///\r\n }{}  % end showMilestones \r\n\r\n \\ifTrue{///Setting.WPTables.taskboxShowsPartners///}{\r\n ~ \\\\[0.2cm] \\noindent \\textbf{Partners contributing to this task:}\r\n\\textbf{///task.lead.shortname///} %\r\n///% for tppm in task.taskpartnerpm_set.exclude(partner=task.lead)  %///\r\n, /// tppm.partner.shortname ///\r\n///% endfor %///\r\n }{}\r\n\r\n\\end{framed}\r\n///% endfor %///  % tasks\r\n\r\n%--------------------------------------------------\r\n\r\n\r\n% details on deliverables and milestones\r\n \\begin{framed}\r\n\r\n%----------------\r\n % deliverables: \r\n///% if Deliverable.filter(maintask__wp=wp)  %///  \r\n \\noindent \\textbf{Deliverables for Workpackage \\ref{///wp.tag///}:}\r\n \\begin{compactdesc}\r\n ///% for d in Deliverable.filter(maintask__wp=wp) %///\r\n\\item[///d.title ///]   \\DelCounter{///d.tag///}\r\n\\ifTrue{///Setting.WPTables.deliverablesWPshowDue///}{\\hfill\r\n  (M\\,///d.due///)}{}\r\n\\ifTrue{///Setting.WPTables.deliverablesWPshowTasks///}{%\r\n~\\\\ Contributing tasks: \r\n   ///% if d.maintask %/// \\textbf{\\ref{///d.maintask.tag///}} % ///% endif %/// \r\n   ///%- for t in d.secondarytasks.all() -%///   , \\ref{///t.tag///}\r\n   ///% endfor %/// % secondary tasks for deliverable \r\n}{}\r\n\\ifTrue{///Setting.WPTables.deliverablesWPshowPartners///}{\r\n\\\\ Contributing partners: \r\n///% for p in d.deliverablepartnertaskpm_set.all() %///\r\n///% set comma = joiner(\", \") %///\r\n///% if p.partner == d.lead %///\r\n///- comma() -/// \\textbf{///p.partner.shortname///}\r\n///% else %///\r\n///- comma() -/// ///p.partner.shortname///\r\n///% endif %///\r\n///% endfor %///\r\n}{}\r\n\\ifTrue{///Setting.WPTables.deliverablesWPshowTotalEffort///}{\r\n\\\\Effort: /// d.deliverablepartnertaskpm_set.all()|sum(attribute='effort') ///\r\n}{}\r\n\\ifTrue{///Setting.WPTables.deliverablesWPshowDescription///}{\r\n  \\\\ Brief description: ///d.description|pandoc(starred=True)///\r\n}{}\r\n\r\n% XXX\r\n///% endfor %/// % deliverable \r\n \\end{compactdesc}\r\n///% endif %///  % end of if devlierables \r\n\r\n%---------- milestones for WP \r\n\r\n///% if Milestone.filter(maintask__wp=wp) %///\r\n \\noindent \\textbf{Milestones for Workpackage \\ref{///wp.tag///}:}\r\n \\begin{compactdesc}\r\n ///% for d in Milestone.filter(maintask__wp=wp) %///\r\n\\item[///d.title ///]   \\MsCounter{///d.tag///}\r\n\\ifTrue{///Setting.WPTables.milestonesWPshowDue///}{\\hfill\r\n  (M\\,///d.due///)}{}\r\n\\ifTrue{///Setting.WPTables.milestonesWPshowTasks///}{%\r\n~\\\\ Contributing tasks: \r\n   ///% if d.maintask %/// \\textbf{\\ref{///d.maintask.tag///}} % ///% endif %///\r\n   ///%- for t in d.secondarytasks.all() -%///   , \\ref{///t.tag///}\r\n   ///% endfor %/// % secondary tasks for milestones \r\n}{}\r\n\\ifTrue{///Setting.WPTables.milestonesWPshowPartners///}{\r\n\\\\ Contributing partners: \r\n///% for p in d.milestonepartnertaskpm_set.all() %///\r\n///% set comma = joiner(\", \") %///\r\n///% if p.partner == d.lead %///\r\n///- comma() -/// \\textbf{///p.partner.shortname///}\r\n///% else %///\r\n///- comma() -/// ///p.partner.shortname///\r\n///% endif %///\r\n///% endfor %///\r\n}{}\r\n\\ifTrue{///Setting.WPTables.milestonesWPshowTotalEffort///}{\r\n\\\\Effort: /// d.milestonepartnertaskpm_set.all()|sum(attribute='effort') ///\r\n}{}\r\n\\ifTrue{///Setting.WPTables.milestonesWPshowDescription///}{\r\n ~\\\\ Brief description: ///d.description|pandoc(starred=True)///\r\n ~\\\\ Means of verification: ///d.verification|pandoc(starred=True)///\r\n}{}\r\n% XXX\r\n///% endfor %/// % milestones \r\n \\end{compactdesc}\r\n///% endif %///\r\n\r\n\\end{framed}\r\n\r\n///% endfor %/// % workpakcages", "startpoint": false}}, {"model": "proposal.template", "pk": 13, "fields": {"name": "EffortDetails.tex", "description": "Produce a table with the effort in PMs per task, per partner. Various layouts possible, controlled by multiple settings.", "template": "///%- macro effortHeader() -%///\r\n Task & Task name & Total PM & \r\n/// Partner|map(attribute='shortname')|join(' & ') ///\r\n\\\\ \r\n///%- endmacro -%///\r\n\r\n\r\n///%- macro effortPerTaskRowsWP() -%///\r\n  ///% for wp in Workpackage %///\r\n    % print the individual task rows, for all the tasks in this wp \r\n    ///% for t in wp.task_set.all() %///\r\n    \\ref{///t.tag///} \r\n    & /// t.title /// \r\n    % total effort in this task \r\n    & /// allEfforts|fieldfilter('task', t)|sum(attribute='effort') ///\r\n    ///% for p in Partner %///\r\n       &\r\n       ///% if p == t.lead %///  \\textbf{ ///% endif %/// \r\n        /// allEfforts|fieldfilter('task', t)|fieldfilter('partner', p)|sum(attribute='effort') ///\r\n      ///% if p == t.lead %///  } ///% endif %///      \r\n    ///% endfor %///\r\n    \\\\\r\n    ///% endfor %///\r\n    % and the summary for this wp: \r\n    \\hline \r\n    \\rowcolor[gray]{0.9}\r\n    \\multicolumn{2}{l|}{\\cellcolor[gray]{0.9} \\textbf{\\ref{///wp.tag///}}} \r\n & /// allEfforts|fieldfilter('wp', wp)|sum(attribute='effort') ///\r\n    ///% for p in Partner %///\r\n      &  ///% if p == wp.lead %///  \\textbf{ ///% endif %/// \r\n          ///allEfforts|fieldfilter('wp', wp)|fieldfilter('partner', p)|sum(attribute='effort') ///\r\n          ///% if p == wp.lead %///  } ///% endif %///\r\n      ///% endfor %///\r\n    \\\\ \\hline\r\n  ///% endfor %///\r\n///%- endmacro -%///\r\n\r\n///%- macro effortSum() -%///\r\n   \\rowcolor[gray]{0.8} \\multicolumn{2}{l|}{\\cellcolor[gray]{0.8} \r\n  \\textbf{Project total: }} & \\textbf{///allEfforts|sum(attribute='effort')///}  \r\n    ///% for p in Partner %///\r\n      &  \r\n      ///allEfforts|fieldfilter('partner', p)|sum(attribute='effort') ///    \r\n    ///% endfor %///\r\n///%- endmacro -%///\r\n\r\n\r\n\\ifTrue{///Setting.Summaries.showEffortPartnerTasks///}\r\n{\\ifTrue{///Setting.LaTeX.useMultipageEffortTable///}\r\n{% Detailed effort table, multipage \r\n% \r\n\\ifTrue{///Setting.LaTeX.effortTableLandscape///}{\\begin{landscape}}{}\r\n \\topcaption{Effort per tasks and partners for entire project (in personmonths)}\r\n \\label{tab:effortPerTasks}\r\n \\tablefirsthead{ \\toprule /// effortHeader() /// \\midrule }\r\n \\tablehead{ \\toprule \\multicolumn{///3+Partner|length///}{r}{\\emph{Table~\\ref{tab:effortPerTasks} continues from previous page}} \\\\ ///effortHeader()/// \\midrule}\r\n \\tabletail{\\bottomrule \\multicolumn{///3+Partner|length///}{r}{\\emph{Table~\\ref{tab:effortPerTasks} continues on next page}} \\\\ \\bottomrule}\r\n \\tablelasttail{  \\multicolumn{///3+Partner|length///}{r}{\\emph{Table~\\ref{tab:effortPerTasks} ends}} \\\\ \\bottomrule}\r\n \\begin{center}\r\n \\begin{mpxtabular}{c|p{0.15\\textwidth}|c///' |c' * Partner|length///} \r\n ///effortPerTaskRowsWP()///\r\n  \\hline \r\n ///effortSum()///\r\n \\\\ \\bottomrule\r\n \\end{mpxtabular}\r\n \\end{center}\r\n \\ifTrue{///Setting.LaTeX.effortTableLandscape///}{\\end{landscape}}{}\r\n}\r\n{ %Detailed effort table, short version \r\n% ${effortPerTaskTableShort}\r\n\\ifTrue{///Setting.LaTeX.effortTableLandscape///}{\\begin{landscape}}{}\r\n \\begin{table}\r\n \\caption{Effort per tasks and partners for entire project (in personmonths)}\r\n \\label{tab:effortPerTasks}\r\n \\begin{center}\r\n \\small\r\n \\begin{tabular}{c|p{0.20\\textwidth}|c|///'|c' * Partner|length///} \r\n \\toprule \r\n /// effortHeader() /// \r\n  \\midrule\r\n /// effortPerTaskRowsWP () ///\r\n \\hline \r\n /// effortSum() ///\r\n \\\\ \\bottomrule\r\n \\end{tabular}\r\n \\end{center}\r\n \\end{table}\r\n \\ifTrue{///Setting.LaTeX.effortTableLandscape///}{\\end{landscape}}{}\r\n}}{}", "startpoint": false}}, {"model": "proposal.template", "pk": 14, "fields": {"name": "CompleteGantt.tex", "description": "Produce a Gantt chart for the entire project, along with table of deliverables and milestones as a legend. Very configurable by multiple settings.", "template": "% the project overall Gantt chart \r\n\r\n\r\n% the project overall Gantt chart \r\n\r\n\\begin{figure}[htbp]\r\n\\centering{\r\n\\maxsizebox{0.95\\textwidth}{0.95\\textheight}{\r\n\\begin{tikzpicture}\r\n      \\begin{ganttchart}[vgrid,hgrid,\r\n      x unit=0.371cm, y unit chart = 0.75cm,\r\n      title label font={\\footnotesize},\r\n      bar height = 0.55,\r\n      bar top shift = 0.225,\r\n      inline, \r\n      milestone label font=\\color{black}\\small, \r\n      milestone label inline anchor={right=.1cm}, \r\n      bar label inline anchor={anchor=west}, bar label font=\\small,\r\n      link={-latex, rounded corners=1ex, thick}]{///Project.duration///}\r\n       \\gantttitlelist{1,...,///Project.duration///}{1}\r\n///% for wp in Workpackage %///\r\n% bars for each WP? \r\n\\ifTrue{///Setting.Gantts.showWPBar///}{\r\n\\\\ \r\n\\ganttgroup{}{///wp.startmonth///}{///wp.endmonth///}\r\n}{}\r\n\r\n% put the task bars\r\n///% for t in wp.task_set.all() %///\r\n  ///% for i in t.interval() %///\r\n   \\\\\r\n      \\ganttbar[name=\"///t.tag///-///loop.index///\"]\r\n{\\ref{///t.tag///} ///% if Setting.Gantts.ganttTaskbarsShowTaskname %///\r\n///% if loop.first %///\r\n~///t.title///\r\n///% else %///\r\n~Phase ///loop.index///\r\n///% endif %///\r\n///% endif %///}{///i.0///}{///i.1///}  \r\n  % links zwischen den Intervallen \r\n    ///% if not loop.first %///\r\n       \\ganttlink[link type=F-S]{\"///t.tag///-///loop.index-1///\"}{\"///t.tag///-///loop.index///\"}\r\n    ///% endif %///\r\n  ///% endfor %///  % interval in tasks \r\n///% endfor %///  % tasks \r\n\r\n%---------------\r\n%----------------------\r\n% then the deliverables \r\n///% for line, dellist in  wp.deliverable_set.all()|compactGantts|groupby('ganttLine') %///\r\n  \\\\\r\n  ///% for d in dellist  %///\r\n  \\ganttmilestone{\\ref{///d.tag///}}{///d.due///}\r\n  ///% endfor %///\r\n///% endfor %///\r\n%----------------------\r\n% and milestones \r\n///% for line, mslist in  wp.milestone_set.all()|compactGantts|groupby('ganttLine') %///\r\n  \\\\\r\n  ///% for ms in mslist  %///\r\n  \\ganttmilestone[milestone={fill=orange, rounded corners=5pt}]{\\ref{///ms.tag///}}{///ms.due///}\r\n  ///% endfor %///\r\n///% endfor %///\r\n\r\n%---------------\r\n\r\n///% endfor %/// % end of workpackage \r\n \\end{ganttchart} \r\n\\end{tikzpicture}\r\n}\r\n} % closes adjust box \r\n\\caption{Gantt chart of all work packages}\r\n\\label{fig:gantt-complete}\r\n\\label{fig:completeGantt}\r\n\\end{figure}\r\n\r\n\r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n% and the legend table \r\n\r\n\\begin{table}\r\n  \\caption[List of all deliverables and milestones]{List of all deliverables and milestones shown in Figure~\\ref{fig:completeGantt}}\r\n  \\label{fig:allDelMSLegend}\r\n  \\begin{multicols}{2}\r\n    \\begin{compactitem}\r\n      ///% for d in Deliverable %///\r\n      \\item \\textbf{\\ref{///d.tag///}}: ///d.title /// (M\\,///d.due///)\r\n      ///% endfor %///\r\n      ///% for m in Milestone %///\r\n      \\item \\textbf{\\ref{///m.tag///}}: ///m.title /// (M\\,///m.due///)\r\n      ///% endfor %///\r\n    \\end{compactitem}\r\n  \\end{multicols}\r\n\\end{table}", "startpoint": false}}, {"model": "proposal.template", "pk": 15, "fields": {"name": "PieCharts.tex", "description": "Generate a couple of pie charts for budget, person month, countries, ... Details can be configured under settings.", "template": "% summary Pie Charts \r\n\r\n///% macro formatPie(x) %///\r\n  /// x|mapReduce('lambda a,b: a+b')|sort|\r\nroundPie|formatListofTuples(\"{1}/{0}\")|join(',') -///\r\n///% endmacro %///\r\n\r\n\r\n% a macro to create the tikzpicture and pick the right columns from a\r\n% table\r\n\r\n///% macro pie(table, colA, colB) -%///\r\n  \\begin{tikzpicture}\r\n \\pie[scale font]{/// formatPie (table|map2(colA, colB)) -/// \r\n}\r\n \\end{tikzpicture}\r\n///%- endmacro %///\r\n\r\n\r\n%----------------------------------------------------\r\n% a macro to build the entire figure environment, with captions etc. \r\n\r\n///% macro pieFigure(flag, table, colA, colB, caption, label) -%///\r\n\\ifTrue{///flag///}{\r\n \\begin{figure}[htbp]\r\n \\centering\r\n /// pie(table, colA, colB) ///\r\n \\caption{///caption///}\r\n \\label{///label///}\r\n \\end{figure}\r\n }{}\r\n///%- endmacro %///\r\n\r\n\r\n%--------------------------------------------------\r\n% a macro to produce compact figure with two subfigures \r\n\r\n///% macro pieCompact(flag, table1, col1A, col1B, table2, col2A,\r\n    col2B,caption, subcap1, subcap2, label) -%///\r\n\\ifTrue{///flag///}{\r\n \\begin{figure}[htbp]\r\n \\centering\r\n \\subfigure[///subcap1///]{\\adjustbox{width=0.3\\textwidth}{ \r\n /// pie(table1, col1A, col1B) ///}\r\n }\r\n\\qquad\r\n \\subfigure[///subcap2///]{\\adjustbox{width=0.3\\textwidth}{ \r\n /// pie(table2, col2A, col2B) ///}\r\n }\r\n \\caption{///caption///}\r\n \\label{///label///}\r\n \\end{figure}\r\n }{}\r\n///%- endmacro %///\r\n\r\n\r\n\r\n%-----------------------------------\r\n% produce the actual figures: \r\n% first, individual pictures: \r\n\r\n\r\n/// pieFigure(Setting.Summaries.piePMsPartners, \r\nallEfforts, 'partner.shortname', 'effort', \r\n'Distribution of person months over partners  (in percent) ',\r\n'fig:pie:pm:partner') ///\r\n\r\n/// pieFigure(Setting.Summaries.piePMsWPs, \r\nallEfforts, 'wp.title', 'effort', \r\n'Distribution of person months over work packages (in percent)',\r\n'fig:pie:pm:wp') ///\r\n\r\n\r\n\r\n/// pieFigure(Setting.Summaries.pieBudgetPartners, \r\nallEfforts, 'partner.shortname', 'effort', \r\n'Distribution of total requested budget over partners  (in percent)',\r\n'fig:pie:budget:partner') ///\r\n\r\n/// pieFigure(Setting.Summaries.piePMsNations, \r\nallEfforts, 'partner.country', 'effort', \r\n'Distribution of person months over nations (in percent)',\r\n'fig:pie:pm:nations') ///\r\n\r\n\r\n/// pieFigure(Setting.Summaries.piePMsPartnerTypes, \r\nallEfforts, 'partner.partnertype.shortname', 'effort', \r\n'Distribution of person months over partner types (in percent)',\r\n'fig:pie:pm:type') ///\r\n\r\n\r\n/// pieFigure(Setting.Summaries.pieBudgetPartners, \r\nPartner, 'shortname', 'requested_contribution', \r\n'Distribution of total requested budget over partners  (in percent)',\r\n'fig:pie:budget:partner') ///\r\n\r\n/// pieFigure(Setting.Summaries.pieTotalCostNations, \r\nallEfforts, 'partner.country', 'partner.total_cost', \r\n'Distribution of total cost over nations (in percent)',\r\n'fig:pie:total:nations') ///\r\n\r\n\r\n/// pieFigure(Setting.Summaries.pieTotalCostPartnerType, \r\nallEfforts, 'partner.partnertype.shortname', 'partner.total_cost', \r\n'Distribution of total cost over partner type (in percent)',\r\n'fig:pie:total:type') ///\r\n%===================================\r\n\r\n\r\n% and compact, side-by-side scenarios \r\n\r\n\r\n/// pieCompact(Setting.Summaries.piePartnersCompact,\r\nallEfforts, 'partner.shortname', 'effort', \r\nPartner, 'shortname', 'requested_contribution', \r\n'Distribution of resources over partners  (in percent)', \r\n'Person months', 'Requested contribution',\r\n'fig:pie:partner:compact'\r\n)///\r\n\r\n\r\n/// pieCompact(Setting.Summaries.pieNationsCompact,\r\nallEfforts, 'partner.country', 'effort', \r\nPartner, 'country', 'requested_contribution', \r\n'Distribution of resources over nations  (in percent)', \r\n'Person months', 'Requested contribution',\r\n'fig:pie:nation:compact'\r\n)///\r\n\r\n\r\n/// pieCompact(Setting.Summaries.piePartnerTypeCompact,\r\nallEfforts, 'partner.partnertype.shortname', 'effort', \r\nPartner, 'partnertype.shortname', 'requested_contribution', \r\n'Distribution of resources over partner type (in percent)', \r\n'Person months', 'Requested contribution',\r\n'fig:pie:type:compact'\r\n)///", "startpoint": false}}, {"model": "proposal.template", "pk": 16, "fields": {"name": "BudgetSummary.tex", "description": "A table to summarize all budget data; corresponds to the one required by the template.", "template": "\\begin{landscape}\r\n\\begin{table}\r\n\\caption{Budget for the proposal (corresponds to Table~3 in the proposal submission forms}\r\n\\label{tab:budgetsummary}\r\n\\begin{tabular}{ccrrrrrrrrrrr}\r\n\\toprule\r\nParticipant & Country \r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(A)\\newline \\footnotesize Direct personnel costs/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(B)\\newline \\footnotesize Other direct costs/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(C)\\newline \\footnotesize Direct costs of subcontracting /\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(D)\\newline \\footnotesize Direct costs of providing financial support  to third parties/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(E)\\newline \\footnotesize Costs of inkind contributions not used on the beneficiary's premises\\newline /\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(F)\\newline \\footnotesize Indirect Costs/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(G)\\newline \\footnotesize Special unit costs covering direct \\& indirect costs}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(H)\\newline \\footnotesize Total estimated eligible costs/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(I)\\newline \\footnotesize Re\\-im\\-burse\\-ment rate}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(J)\\newline \\footnotesize Max.\\ grant/\\texteuro}\r\n& \\multicolumn{1}{p{0.08\\textwidth}}{(K)\\newline \\footnotesize Requested grant/\\texteuro}\r\n\\\\\r\n\\midrule\r\n///% for p in Partner %///\r\n /// p.shortname ///\r\n & /// p.country /// \r\n  & ///p.personnel_cost|round/// \r\n  & ///p.other_direct_cost|round /// \r\n  & ///p.subcontract_cost|round/// \r\n  & ///p.finanical_support_3rd|round/// \r\n  & ///p.inkind_contributions|round/// \r\n  & ///p.indirect_cost|round/// \r\n  & ???\r\n  & ///p.total_cost|round/// \r\n  & ///p.reimbursement_rate|round /// \r\n  & ///p.maxcontribution|round/// \r\n  & ///p.requested_contribution|round/// \r\n  \\\\ \r\n///% endfor %///\r\n\\midrule \r\nTotal & \r\n& /// Partner|map(attribute='personnel_cost')|sum|round  ///\r\n& /// Partner|map(attribute='other_direct_cost')|sum|round  ///\r\n& /// Partner|map(attribute='subcontract_cost')|sum|round  ///\r\n& /// Partner|map(attribute='finanical_support_3rd')|sum|round  ///\r\n& /// Partner|map(attribute='inkind_contributions')|sum|round  ///\r\n& /// Partner|map(attribute='indirect_cost')|sum|round  ///\r\n& ???\r\n& /// Partner|map(attribute='total_cost')|sum|round  ///\r\n& 100\r\n& /// Partner|map(attribute='maxcontribution')|sum|round  ///\r\n& /// Partner|map(attribute='requested_contribution')|sum|round  ///\r\n\\\\\r\n\\bottomrule\r\n\\end{tabular}\r\n\\end{table}\r\n\\end{landscape}", "startpoint": false}}, {"model": "proposal.template", "pk": 17, "fields": {"name": "BudgetExplanations.tex", "description": "If a partner provides any particular explanation for a cost category, generate a table with the corresponding entry for it.", "template": "///% for p in Partner %///\r\n\r\n///% if p.budget_explanations %///\r\n\r\n     \\begin{table}\r\n     \\caption{Budget explanations for partner ///p.shortname///}\r\n     \\label{tab:budgetExplanation:///p.shortname///}\r\n     \\begin{tabular}{p{0.15\\textwidth}rp{0.7\\textwidth}}\r\n       \\toprule\r\n       \\textbf{///p.shortname///} & Cost (\\texteuro) & Justification \\\\\r\n       \\midrule\r\n       ///% if p.other_direct_cost_explanation|pandoc %///\r\n       Other direct cost & ///p.other_direct_cost|round/// & ///p.other_direct_cost_explanation|pandoc/// \\\\\r\n       ///% endif %///\r\n       ///% if p.subcontract_cost_explanation|pandoc %///\r\n       Other direct cost & ///p.subcontract_cost|round/// & ///p.subcontract_cost_explanation|pandoc/// \\\\\r\n       ///% endif %///\r\n       \\bottomrule\r\n     \\end{tabular}\r\n     \\end{table}\r\n\r\n\r\n///% endif %///\r\n\r\n///% endfor %///", "startpoint": false}}]